<!DOCTYPE html>
<html class="dark" lang="es">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Asistente de Tareas</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#d4af37", // Muted Gold
                        "accent": "#6366f1",  // Indigo
                        "bg-dark": "#1a1c2e", // Deep Indigo/Slate
                        "card-dark": "#232642",
                        "surface": "#2d3154",
                        "gold": {
                            "DEFAULT": "#d4af37",
                            "light": "#f1e4b5",
                            "dark": "#997b24"
                        }
                    },
                    fontFamily: {
                        "sans": ["Inter", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.375rem", "lg": "0.75rem", "xl": "1rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style type="text/tailwindcss">
        :root {
            --primary: #d4af37;
            --accent: #6366f1;
            --bg-dark: #1a1c2e;
        }
        body { 
            font-family: 'Inter', sans-serif;
            background-color: #1a1c2e;
            letter-spacing: -0.011em;
        }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); }
        .glass-effect {
            background: rgba(35, 38, 66, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(212, 175, 55, 0.1);
        }
        .executive-glow {
            box-shadow: 0 10px 30px -15px rgba(0, 0, 0, 0.5), 0 0 15px rgba(212, 175, 55, 0.05);
        }
        /* Custom scrollbar for task list */
        #listaTareas::-webkit-scrollbar {
            width: 4px;
        }
        #listaTareas::-webkit-scrollbar-track {
            background: transparent;
        }
        #listaTareas::-webkit-scrollbar-thumb {
            background: #d4af37;
            border-radius: 10px;
        }
        .grabando {
            animation: pulse-red 1s infinite alternate;
            background: #ef4444 !important;
            color: white !important;
        }
        @keyframes pulse-red {
            from { opacity: 1; }
            to { opacity: 0.5; }
        }

        /* Light Theme Overrides */
        html.light-theme body { background-color: #f1f5f9; }
        html.light-theme .bg-bg-dark { background-color: #f1f5f9 !important; }
        html.light-theme .bg-card-dark { background-color: #ffffff !important; border-color: #e2e8f0 !important; }
        html.light-theme .text-white { color: #0f172a !important; }
        html.light-theme .text-slate-300 { color: #334155 !important; }
        html.light-theme .text-slate-400 { color: #64748b !important; }
        html.light-theme .border-indigo-900\/30 { border-color: #cbd5e1 !important; }
        html.light-theme .border-indigo-900\/40 { border-color: #cbd5e1 !important; }
        html.light-theme .border-indigo-900\/50 { border-color: #cbd5e1 !important; }
        html.light-theme .bg-indigo-950\/20 { background-color: #f8fafc !important; border-color: #e2e8f0 !important; }
        html.light-theme .bg-slate-900\/50 { background-color: #e2e8f0 !important; }
        html.light-theme .bg-slate-900\/30 { background-color: #f8fafc !important; }
        html.light-theme .bg-slate-950\/60 { background-color: #ffffff !important; color: #0f172a !important;}
        html.light-theme .bg-indigo-900\/20 { background-color: #f1f5f9 !important; border-color: #cbd5e1 !important;}
        html.light-theme .hover\:bg-indigo-900\/30:hover { background-color: #e2e8f0 !important; }
        html.light-theme .bg-slate-900\/20 { background-color: #e2e8f0 !important; color:#94a3b8 !important;}
        html.light-theme .executive-glow { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.025) !important; }
        html.light-theme .bg-slate-800 { background-color: #f1f5f9 !important; }
        html.light-theme .border-white\/5 { border-color: #e2e8f0 !important; }
        html.light-theme .hover\:text-white:hover { color: #0f172a !important; }
    </style>
</head>

<body class="bg-bg-dark text-slate-300 min-h-screen flex flex-col">
    <header class="sticky top-0 z-50 bg-bg-dark/95 backdrop-blur-md border-b border-indigo-900/50 px-6 py-4">
        <div class="max-w-[1440px] mx-auto flex items-center justify-between gap-8">
            <div class="flex items-center gap-8 shrink-0">
                <div class="flex items-center gap-2 text-gold group cursor-pointer transition-all hover:opacity-80 relative"
                    onclick="toggleLogoBrand(event)"
                    title="Clic para cambiar variante de logo. Shift+Clic para subir tu propio logo">
                    <!-- Icono por defecto -->
                    <span class="material-symbols-outlined text-3xl font-bold" id="appLogoIcon">insights</span>
                    <!-- Imagen de Logo (Oculta por defecto) -->
                    <img src="https://ui-avatars.com/api/?name=F+F&background=d4af37&color=1a1c2e&bold=true" alt="Logo"
                        class="h-8 w-auto hidden rounded shadow-sm" id="appLogoImage">

                    <h1 class="text-white text-xl font-extrabold tracking-tight select-none" id="appLogoText">Asistente
                        <span class="text-gold font-light tracking-widest text-[10px] uppercase ml-1"
                            id="appLogoSubtext">Premium</span>
                    </h1>

                    <!-- Hover Tooltip Hint -->
                    <div
                        class="absolute -bottom-8 left-0 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap text-[10px] bg-slate-800 text-slate-300 px-2 py-1 rounded pointer-events-none">
                        Shift + Clic = Subir tu logo
                    </div>
                </div>
                <input type="file" id="logoFileInput" class="hidden" accept="image/*"
                    onchange="subirLogoPersonalizado(event)">
                <div class="relative w-64 lg:w-96 ml-6">
                    <span id="fechaActual" class="text-xs font-medium text-slate-400"></span>
                </div>
            </div>

            <nav class="hidden md:flex bg-slate-900/50 p-1 rounded-lg border border-indigo-900/30">
                <button id="btn-vista-dia" onclick="cambiarVista('dia')"
                    class="vista-btn px-5 py-1.5 text-xs font-semibold rounded text-slate-500 hover:text-white transition-colors">Día</button>
                <button id="btn-vista-semana" onclick="cambiarVista('semana')"
                    class="vista-btn px-5 py-1.5 text-xs font-semibold rounded text-slate-500 hover:text-white transition-colors">Semana</button>
                <button id="btn-vista-mes" onclick="cambiarVista('mes')"
                    class="vista-btn px-5 py-1.5 text-xs font-semibold rounded bg-surface text-gold border border-gold/20 shadow-lg active-vista">Mes</button>
            </nav>

            <div class="flex items-center gap-4 shrink-0">
                <button class="p-2 text-slate-400 hover:text-gold transition-colors relative group">
                    <span class="material-symbols-outlined">notifications</span>
                    <span id="notifBadge"
                        class="absolute top-1 right-1 h-4 w-4 bg-accent text-[10px] text-white font-bold flex items-center justify-center rounded-full border border-bg-dark hidden">0</span>
                    <div
                        class="absolute top-full right-0 mt-2 w-64 bg-card-dark border border-indigo-900/50 rounded-lg shadow-2xl p-4 hidden group-hover:block z-50 text-left">
                        <p class="text-[10px] font-bold text-gold uppercase mb-2">Resumen Hoy</p>
                        <p class="text-xs text-slate-300" id="notifText">No tienes prioridades pendientes urgentes.</p>
                    </div>
                </button>
                <button class="p-2 text-slate-400 hover:text-gold transition-colors" onclick="toggleTema()"
                    title="Cambiar Tema">
                    <span class="material-symbols-outlined" id="temaIcon">light_mode</span>
                </button>
                <div class="text-right hidden sm:block">
                    <p class="text-xs font-bold text-white leading-tight" id="userNameDisplay"></p>
                    <p class="text-[10px] text-gold/60 uppercase tracking-widest font-medium" id="userEmail"></p>
                </div>

                <button onclick="logout()" class="p-2 text-slate-400 hover:text-gold transition-colors"
                    title="Cerrar sesión">
                    <span class="material-symbols-outlined">logout</span>
                </button>
                <div class="h-10 w-10 rounded-full border-2 border-gold/30 bg-gold/5 flex items-center justify-center ml-2 cursor-pointer hover:border-gold transition-all overflow-hidden relative group"
                    title="Clic para subir foto de perfil"
                    onclick="document.getElementById('profileFileInput').click()">
                    <span class="text-xs font-bold text-gold" id="userInitials">JD</span>
                    <img id="userProfileImg" src="" class="absolute inset-0 w-full h-full object-cover hidden"
                        alt="Perfil">
                    <div
                        class="absolute inset-0 bg-black/50 hidden group-hover:flex items-center justify-center transition-all">
                        <span class="material-symbols-outlined text-[1rem] text-white">upload</span>
                    </div>
                </div>
                <input type="file" id="profileFileInput" class="hidden" accept="image/*"
                    onchange="subirFotoPerfil(event)">
            </div>
        </div>
    </header>

    <main class="flex-1 max-w-[1440px] mx-auto w-full p-6 grid grid-cols-12 gap-6">
        <!-- Sidebar: Task Creation & Filters -->
        <section class="col-span-12 lg:col-span-5 flex flex-col gap-6">
            <div
                class="bg-card-dark rounded-xl border border-indigo-900/30 flex flex-col h-full overflow-hidden executive-glow">
                <div class="p-6 border-b border-indigo-900/30 bg-indigo-950/20">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-bold tracking-tight text-white">Gestión de Tareas <span
                                class="text-gold/60 font-medium text-sm ml-2" id="headerStats"></span></h2>
                    </div>

                    <!-- Create Task Form -->
                    <div class="bg-slate-900/30 p-5 rounded-xl border border-indigo-900/20 mb-6">
                        <div class="relative mb-4">
                            <input type="text" id="nuevaTarea" placeholder="¿Qué vamos a lograr hoy?"
                                class="w-full bg-slate-950/60 border border-indigo-900/40 rounded-lg py-3 pl-4 pr-12 text-sm text-white focus:ring-1 focus:ring-gold/50 focus:border-gold transition-all placeholder:text-slate-600" />
                            <button id="btnVoz" onclick="iniciarReconocimientoVoz()"
                                class="absolute right-3 top-1/2 -translate-y-1/2 text-gold/60 hover:text-gold transition-colors"
                                title="Dictado por voz">
                                <span class="material-symbols-outlined">mic</span>
                            </button>
                        </div>
                        <div class="grid grid-cols-2 gap-3 mb-4">
                            <div class="flex flex-col gap-1">
                                <label for="fechaTarea"
                                    class="text-[10px] font-bold text-slate-500 uppercase ml-1">Fecha</label>
                                <input type="date" id="fechaTarea"
                                    class="bg-slate-950/60 border border-indigo-900/40 rounded-lg py-2 px-3 text-xs text-white focus:ring-1 focus:ring-gold/50" />
                            </div>
                            <div class="flex flex-col gap-1">
                                <label for="horaTarea"
                                    class="text-[10px] font-bold text-slate-500 uppercase ml-1">Hora</label>
                                <input type="time" id="horaTarea"
                                    class="bg-slate-950/60 border border-indigo-900/40 rounded-lg py-2 px-3 text-xs text-white focus:ring-1 focus:ring-gold/50" />
                            </div>
                        </div>
                        <div class="flex items-center gap-3">
                            <div class="flex-1 flex flex-col gap-1">
                                <label for="prioridadTarea"
                                    class="text-[10px] font-bold text-slate-500 uppercase ml-1">Prioridad</label>
                                <select id="prioridadTarea"
                                    class="bg-slate-950/60 border border-indigo-900/40 rounded-lg py-2 px-3 text-xs text-white focus:ring-1 focus:ring-gold/50">
                                    <option value="BAJA">Baja</option>
                                    <option value="MEDIA" selected>Media</option>
                                    <option value="ALTA">Alta</option>
                                </select>
                            </div>
                            <button onclick="agregarTarea()"
                                class="bg-gold hover:bg-gold-dark text-bg-dark px-6 py-2.5 rounded-lg text-xs font-bold transition-all shadow-lg active:scale-95 self-end">
                                AGREGAR
                            </button>
                        </div>
                    </div>

                    <div class="flex gap-4">
                        <button class="filtro-btn text-xs font-bold uppercase border-b-2 border-gold text-gold pb-2"
                            onclick="filtrarTareas('TODAS')">Todas</button>
                        <button
                            class="filtro-btn text-xs font-bold uppercase border-b-2 border-transparent text-slate-500 hover:text-slate-300 pb-2 transition-all"
                            onclick="filtrarTareas('PENDIENTES')">Pendientes</button>
                        <button
                            class="filtro-btn text-xs font-bold uppercase border-b-2 border-transparent text-slate-500 hover:text-slate-300 pb-2 transition-all"
                            onclick="filtrarTareas('COMPLETADAS')">Completadas</button>
                    </div>
                </div>

                <!-- Task List Container -->
                <div id="listaTareas" class="flex-1 overflow-y-auto p-4 space-y-4 max-h-[500px]">
                    <!-- Tasks load here -->
                </div>

                <div id="sinTareas" class="hidden flex-1 items-center justify-center p-8 text-center flex-col gap-4">
                    <span class="material-symbols-outlined text-4xl text-gold/20">auto_awesome</span>
                    <p class="text-slate-500 text-sm font-medium">No hay tareas pendientes en esta categoría.</p>
                </div>
            </div>
        </section>

        <!-- Main Content: Calendar & Metrics -->
        <section class="col-span-12 lg:col-span-7 flex flex-col gap-6">
            <!-- Calendar Section -->
            <div class="bg-card-dark rounded-xl border border-indigo-900/30 p-8 flex flex-col executive-glow">
                <div class="flex items-center justify-between mb-8">
                    <div class="flex flex-col">
                        <h2 class="text-3xl font-extrabold tracking-tight text-white" id="mesActual">Marzo 2026</h2>
                        <p class="text-xs text-gold font-medium mt-1">Estatus del Ciclo de Tareas: <span
                                class="text-white" id="estatusCiclo">Activo</span></p>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="cambiarMes(-1)"
                            class="p-2.5 bg-slate-900/50 hover:bg-gold hover:text-bg-dark rounded-lg border border-indigo-900/30 transition-all">
                            <span class="material-symbols-outlined text-sm">arrow_back_ios_new</span>
                        </button>
                        <button onclick="cambiarMes(1)"
                            class="p-2.5 bg-slate-900/50 hover:bg-gold hover:text-bg-dark rounded-lg border border-indigo-900/30 transition-all">
                            <span class="material-symbols-outlined text-sm">arrow_forward_ios</span>
                        </button>
                    </div>
                </div>
                <div class="calendar-grid text-center mb-6 border-b border-indigo-900/30 pb-4" id="calendarHeaderDays">
                    <div class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Lun</div>
                    <div class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Mar</div>
                    <div class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Mié</div>
                    <div class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Jue</div>
                    <div class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Vie</div>
                    <div class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Sáb</div>
                    <div class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Dom</div>
                </div>
                <div class="calendar-grid flex-1 gap-px bg-indigo-900/20 border border-indigo-900/20 rounded-lg overflow-hidden"
                    id="calendarGrid">
                    <!-- Dinamically injected by JS -->
                </div>
            </div>

            <!-- Stats Section -->
            <div class="bg-card-dark rounded-xl border border-indigo-900/30 p-8 executive-glow">
                <h3 class="text-xs font-bold text-slate-500 uppercase tracking-[0.2em] mb-6">Métrica de Rendimiento
                    Diario</h3>
                <div class="flex justify-between items-end mb-4">
                    <span class="text-xs font-bold uppercase text-slate-500" id="contadorTareas">Progreso: 0/0
                        completadas</span>
                    <span class="text-gold text-2xl font-black" id="porcentajeCompletado">0%</span>
                </div>
                <div class="w-full bg-slate-900 rounded-full h-2 overflow-hidden border border-indigo-900/20">
                    <div class="bg-gold h-full shadow-[0_0_10px_rgba(212,175,55,0.4)] transition-all duration-500"
                        id="barraProgreso" style="width: 0%"></div>
                </div>
                <p class="text-[11px] text-slate-400 mt-5 text-center font-medium leading-relaxed italic"
                    id="fraseMotivacional">
                    "Divide tus tareas y conquistarás el día."
                </p>
            </div>
        </section>
    </main>

    <footer class="bg-bg-dark border-t border-indigo-900/50 p-6 mt-auto">
        <div class="max-w-[1440px] mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">© 2026 Taskly Elite • Jomar71 Dev
            </p>
            <div class="flex gap-6">
                <a href="#"
                    class="text-[10px] font-bold text-slate-500 hover:text-gold uppercase tracking-widest transition-colors">Soporte</a>
                <a href="#"
                    class="text-[10px] font-bold text-slate-500 hover:text-gold uppercase tracking-widest transition-colors">Privacidad</a>
            </div>
        </div>
    </footer>

    <script type="module" src="js/app.js?v=1.5"></script>
</body>

</html>